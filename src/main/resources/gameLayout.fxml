<?import com.comp2042.GameOverPanel?>
<?import javafx.scene.Group?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Text?>
<?import java.net.URL?>

<!-- Main game screen. GuiController is the brain behind this layout. -->
<Pane fx:controller="com.comp2042.GuiController"
      xmlns:fx="http://javafx.com/fxml">

    <!-- Small grid on the side that shows the next brick. -->
    <GridPane fx:id="brickPanel" vgap="1" hgap="1"/>

    <!-- Outer frame for the main board (border, glow, etc.). -->
    <BorderPane styleClass="gameBoard" fx:id="gameBoard">
        <center>
            <!-- Actual 10xN board where the pieces fall. -->
            <GridPane fx:id="gamePanel"
                      hgap="1" vgap="1"
                      layoutY="30" layoutX="40"/>
        </center>
    </BorderPane>

    <!-- Compact HUD card showing score, level, combo and danger state.
         GuiController still binds these Text nodes; only layout / style changes here. -->
    <VBox layoutX="260.0" layoutY="25.0" spacing="6.0" styleClass="hud-box">
        <Text fx:id="scoreText" text="Score 0" styleClass="hud-value"/>
        <Text fx:id="levelText" text="Level 1" styleClass="hud-value"/>
        <Text fx:id="comboText" text="Combo x0" styleClass="hud-value"/>
        <Text fx:id="dangerText" text="DANGER!"
              visible="false"
              styleClass="dangerText hud-danger"/>
    </VBox>

    <!-- Pause overlay: dark background with a simple pause menu.
         Shown when GameState is PAUSED; buttons call back into GuiController. -->
    <Pane fx:id="pauseOverlay"
          layoutX="0.0" layoutY="0.0"
          prefWidth="400.0" prefHeight="500.0"
          visible="false"
          mouseTransparent="false"
          style="-fx-background-color: rgba(0,0,0,0.5);">
        <children>
            <VBox alignment="CENTER" spacing="10.0" layoutX="40.0" layoutY="180.0">
                <Label text="PAUSED" styleClass="gameOverStyle"/>

                <Button text="Resume"
                        onAction="#handleResumeFromPause"
                        styleClass="ipad-dark-grey"/>

                <Button text="Main Menu"
                        onAction="#handleBackToMenuFromPause"
                        styleClass="ipad-dark-grey"/>
            </VBox>
        </children>
    </Pane>

    <!-- Used for pop-up messages (score, etc.) and the GameOverPanel. -->
    <Group fx:id="groupNotification" layoutX="14.0" layoutY="203.0">
        <VBox alignment="CENTER">
            <GameOverPanel fx:id="gameOverPanel"/>
        </VBox>
    </Group>

    <!-- Global styles for this scene (board border, fonts, colours, etc.). -->
    <stylesheets>
        <URL value="@window_style.css"/>
    </stylesheets>
</Pane>
